package rebue.hlw;

import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import org.junit.Test;

import com.fasterxml.jackson.databind.ObjectMapper;

import rebue.hlw.mo.${entityName}Mo;
import rebue.robotech.ro.IdRo;
import rebue.wheel.OkhttpUtils;
import rebue.wheel.test.MockDataUtils;

/**
 * ${table.remarks}
 *
 * @mbg.generated 自动生成的注释，如需修改本注释，请删除本行
 */
public class ${entityName}Tests {

	/**
	 * @mbg.generated 自动生成，如需修改，请删除本行
	 */
	private final String hostUrl = "http://127.0.0.1:9009";

	/**
	 * 基本的增删改查
	 * 
	 * @mbg.generated 自动生成，如需修改，请删除本行
	 */
	@Test
	public void crudTest() throws SecurityException, NoSuchMethodException, IllegalArgumentException,
			IllegalAccessException, InvocationTargetException, InstantiationException, IOException {
		${entityName}Mo mo = (${entityName}Mo) MockDataUtils.newRandomPojo(new ${entityName}Mo().getClass());
		mo.setId(null);
		System.out.println("添加${table.remarks}的参数为：" + mo);
		String addResult = OkhttpUtils.postByJsonParams(hostUrl + "/${strutil.toLowerCase(entityNamePrefix)}/${strutil.toLowerCase(entitySimpleName)}", mo);
		System.out.println("添加${table.remarks}的返回值为：" + addResult);
		ObjectMapper objectMapper = new ObjectMapper();
		IdRo idRo = objectMapper.readValue(addResult, IdRo.class);
		System.out.println(idRo);
		mo.setId(idRo.getId());
		String listResult = OkhttpUtils.get(hostUrl + "/${strutil.toLowerCase(entityNamePrefix)}/${strutil.toLowerCase(entitySimpleName)}?pageNum=1&pageSize=5");
		System.out.println("查询${table.remarks}的返回值为：" + listResult);
		System.out.println("获取单个${table.remarks}的参数为：" + mo.getId());
		String getByIdResult = OkhttpUtils.get(hostUrl + "/${strutil.toLowerCase(entityNamePrefix)}/${strutil.toLowerCase(entitySimpleName)}/getbyid?id=" + mo.getId());
		System.out.println("获取单个${table.remarks}的返回值为：" + getByIdResult);
		System.out.println("修改${table.remarks}的参数为：" + mo);
		String modifyResult = OkhttpUtils.putByJsonParams(hostUrl + "/${strutil.toLowerCase(entityNamePrefix)}/${strutil.toLowerCase(entitySimpleName)}", mo);
		System.out.println("修改${table.remarks}的返回值为：" + modifyResult);
		System.out.println("删除${table.remarks}的参数为：" + mo.getId());
		String deleteResult = OkhttpUtils.delete(hostUrl + "/${strutil.toLowerCase(entityNamePrefix)}/${strutil.toLowerCase(entitySimpleName)}?id=" + mo.getId());
		System.out.println("删除${table.remarks}的返回值为：" + deleteResult);
	}
}
